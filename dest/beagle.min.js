var Beagle;!function(){"use strict";function a(a,b){d(l[a],function(a){a(b)})}function b(){return g}function c(){var a=Date.now(),b=Math.floor(Math.random()*a-(a+1e3)+(a+1e3));return b}function d(a,b){for(var c=a.length;c--;)b(a[c],c)}function e(a,b){var c={};for(var d in a)c[d]=a[d];for(var d in b)c[d]=b[d];return c}var f="DB",g={},h=function(){n().init();var a={Schema:function(a){return i(a)},show:function(){return n().show()}};return a=e(a,m()),a=e(a,j())},i=function(a){var b={};b._id=a._id||{label:"id"};for(var c in a)b[c]=a[c];g=b},j=function(){function e(a,c){var d=a;for(var e in c)void 0!==b()[e]&&(d[e]=c[e]);return d}function f(a,c){var d=a;for(var e in c)void 0!==b()[e]&&d[e]instanceof Array&&d[e].push(c[e]);return d}function g(a){var b={};for(var c in a)b[c]=a[c].value;return b}function h(a){var d={};void 0===a._id&&(a._id=c());for(var e in b())d[e]={value:a[e],label:b()[e].label};return d}var i={insert:function(b){n().set(h(b)),a("add",b)},removeById:function(b){var c=n().get();void 0!==c[b]&&(delete c[b],n().refresh(c),c=null,a("remove"))},updateById:function(b,c){var d;if(!this.findById(b)._id)return void 0;var g=this.findById(b);for(var i in c)"set"===i&&(d=e(g,c[i])),"push"===i&&(d=f(g,c[i]));var j=n().get();return j[b]=h(d),n().refresh(j),j=null,a("update",d),d},find:function(a){var b=n().get(),c=[],e={},f=[];for(var h in b)c.push(g(b[h]));for(var h in a){if(void 0===h)throw o.noQuery;e[0]=h,e[1]=a[h]}return void 0===a?k(c):(d(c,function(a){a[e[0]]===e[1]&&f.push(a)}),b=null,k(f))},findById:function(a){return g(n().get()[a])}};return i},k=function(a){var b=a,c={count:function(){return b.length},fetch:function(){return b},where:function(c){var e=[];for(var f in c)d(a,function(a){c[f]===a[f]&&e.push(a)});return b=e,this}};return c},l={update:[],remove:[],add:[]},m=function(){return{on:function(a,b){l[a].push(b)}}},n=function(){function a(){if(void 0===localStorage)throw o.noLocalStorage;void 0===b.get()&&localStorage.setItem(f,"{}")}var b={init:function(){a()},show:function(){return this.get()},set:function(a){var b=this.get();b[a._id.value]=a,localStorage.setItem(f,JSON.stringify(b))},refresh:function(a){localStorage.setItem(f,JSON.stringify(a))},get:function(){var a=localStorage.getItem(f);return null!==a?JSON.parse(a):void 0}};return b},o={noLocalStorage:"Your Browser does not Support LocalStorage",noQuery:"Your find parameter is empty"};Beagle=new h}(),function(){"use strict";Beagle.Schema({username:{label:"Username"},email:{label:"Email"},arr:{label:"Array"}});document.getElementById("save_btn").addEventListener("click",function(){var a={username:document.getElementById("username").value,email:document.getElementById("email").value,arr:["test1","test2"]};Beagle.insert(a)},!1);Beagle.on("add",function(){}),Beagle.on("add",function(){console.log("ADD")}),Beagle.on("update",function(a){console.log(a)}),Beagle.on("update",function(){console.log("callback3")}),Beagle.on("remove",function(){console.log("remove")}),Beagle.on("remove",function(){console.log("ss")}),console.log(Beagle);var a=Beagle.show();console.log(a)}();
//# sourceMappingURL=beagle.min.js.map